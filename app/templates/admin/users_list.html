{% extends "layout.html" %}
{% block content %}
  <h1>用户管理</h1>
  <a href="/admin/users/new"><button>新增用户</button></a>
  <table>
    <thead>
      <tr>
        <th>ID</th>
        <th>邮箱</th>
        <th>管理员</th>
        <th>启用</th>
        <th>创建时间</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for u in users %}
      <tr>
        <td>{{ u.id }}</td>
        <td>{{ u.email }}</td>
        <td>{{ '是' if u.is_admin else '否' }}</td>
        <td>{{ '是' if u.is_active else '否' }}</td>
        <td>{{ u.created_at }}</td>
        <td>
          <a href="/admin/users/edit/{{ u.id }}"><button>编辑</button></a>
          <form method="post" action="/admin/users/delete/{{ u.id }}" style="display:inline;" onsubmit="return confirm('确认删除此用户？');">
            <input type="submit" value="删除" />
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}